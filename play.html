<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://use.typekit.net/dyb4vif.css">
  <title>Collaboration Station ðŸ“¡ Bingo</title>
  <style>
    body {
      background-color: #111111;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: "tablet-gothic-wide", sans-serif;
      font-weight: 400;
      font-style: normal;
    }

    #bingo-grid {
      margin: 20px auto;
      border-collapse: collapse;
      width: 80vw;
      height: 80vw;
      max-width: 500px;
      max-height: 500px;
    }

    .cell {
      border: 1px solid #dcdde1;
      text-align: center;
      vertical-align: middle;
      font-size: 1.5vw;
      line-height: 1;
      cursor: pointer;
      position: relative;
      text-transform: uppercase;
      word-wrap: break-word;
      hyphens: auto;
    }

    .phrase, .mark {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: "tablet-gothic-wide", sans-serif;
      font-weight: 400;
      font-style: normal;
      color: #dcdde1;
    }

    .mark {
      color: hsla(189 27.7% 37.5% / 0.81);
      font-size: 6vw;
      display: none; /* Hidden by default */
      font-family: poplar-std, sans-serif;
      font-weight: 400;
      font-style: normal;
    }

    /* Overlay Styling */
    .bingo-overlay {
      display: none;
      width: 80vw;
      max-width: 500px;
      margin: 10px auto;
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }

    .overlay-content h1 {
      color: #45727a;
      font-size: 6vw;
      margin: 10px 0;
      font-family: poplar-std, sans-serif;
      font-weight: 400;
      font-style: normal;
    }
    
    h1 {
      color: #45727a;
      font-size: 6vw;
      margin: 10px 0;
      font-family: poplar-std, sans-serif;
      font-weight: 400;
      font-style: normal;
      text-transform: uppercase;
    }

    #share-message {
      white-space: pre-wrap;
      margin: 10px 0;
      font-size: 16px;
      border: 1px solid #ccc;
      padding: 10px;
      background-color: #f9f9f9;
      font-family: tablet-gothic-wide, sans-serif;
      font-weight: 400;
      font-style: normal;
    }

    #copy-button, #close-overlay {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      font-family: tablet-gothic-wide, sans-serif;
      font-weight: 400;
      font-style: normal;
    }
  </style>
</head>
<body>
  <!-- Bingo Grid -->
  <table id="bingo-grid">
    <tr><h1>Collaboration Station</h1>
    <tr>
    <tr>
      <td class="cell" data-row="0" data-col="0"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="0" data-col="1"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="0" data-col="2"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="0" data-col="3"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="0" data-col="4"><span class="phrase"></span><span class="mark">X</span></td>
    </tr>
    <tr>
      <td class="cell" data-row="1" data-col="0"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="1" data-col="1"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="1" data-col="2"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="1" data-col="3"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="1" data-col="4"><span class="phrase"></span><span class="mark">X</span></td>
    </tr>
    <tr>
      <td class="cell" data-row="2" data-col="0"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="2" data-col="1"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="2" data-col="2"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="2" data-col="3"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="2" data-col="4"><span class="phrase"></span><span class="mark">X</span></td>
    </tr>
    <tr>
      <td class="cell" data-row="3" data-col="0"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="3" data-col="1"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="3" data-col="2"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="3" data-col="3"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="3" data-col="4"><span class="phrase"></span><span class="mark">X</span></td>
    </tr>
    <tr>
      <td class="cell" data-row="4" data-col="0"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="4" data-col="1"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="4" data-col="2"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="4" data-col="3"><span class="phrase"></span><span class="mark">X</span></td>
      <td class="cell" data-row="4" data-col="4"><span class="phrase"></span><span class="mark">X</span></td>
    </tr>
  </table>

  <!-- Bingo Overlay -->
  <div id="bingo-overlay" class="bingo-overlay">
    <div class="overlay-content">
      <h1>BINGO!!</h1>
      <p>Take a screenshot of your winning board and post it below the space with the following:</p>
      <pre id="share-message">BINGO! @catebligh @cfryant @richsilverx ... I got BINGO!</pre>
      <button id="copy-button">Copy to Clipboard</button>
      <button id="close-overlay">Close</button>
    </div>
  </div>

  <!-- External Libraries and Script -->
  <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script>
  <script>
    // Define the new phrases
    const phrases = [
      "squabble breaks out",
      "thirsty Europeans",
      "sudden dark turn",
      "What are you working on?",
      "z-list celebrity takes over space",
      "cate mentions mom / boomers",
      "Chris gets jealous",
      "toxic positivity",
      "Chris says non sequitur joke and no one laughs",
      "AI can help with that",
      "Someone interrupts",
      "driving while talking",
      "Free!",
      "music interlude",
      "We can't hear you",
      "convers-ation side-tracked",
      "animals in the back-ground",
      "crazy person joins",
      "land my plane",
      "unrelated poll",
      "Project-o-tron",
      "Cate loses train of thought",
      "Purple Pill",
      "making 1 quick point for 5 minutes",
      "spaces glitch"
    ];

    // Shuffle function
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // Shuffle phrases
    const shuffledPhrases = shuffle([...phrases]);

    // Initialize 5x5 marked array (all false initially)
    const marked = Array(5).fill().map(() => Array(5).fill(false));

    // Populate the grid and add interactivity
    const cells = document.querySelectorAll('#bingo-grid .cell');
    cells.forEach(cell => {
      const row = parseInt(cell.dataset.row);
      const col = parseInt(cell.dataset.col);
      const phraseSpan = cell.querySelector('.phrase');
      const markSpan = cell.querySelector('.mark');

      // Assign "Free!" to the center cell and mark it
      if (row === 2 && col === 2) {
        phraseSpan.textContent = "Free!";
        markSpan.style.display = 'block'; // Show 'X' for Free!
        marked[row][col] = true;
      } else {
        // Assign shuffled phrases, skipping "Free!" if it appears elsewhere
        let phrase = shuffledPhrases.shift();
        if (phrase === "Free!" && (row !== 2 || col !== 2)) {
          phrase = shuffledPhrases.shift(); // Skip "Free!" for non-center cells
        }
        phraseSpan.textContent = phrase;
        markSpan.style.display = 'none'; // Hide 'X' initially
        marked[row][col] = false;
      }

      cell.addEventListener('click', () => {
        if (row === 2 && col === 2) return; // "Free!" can't be unmarked
        marked[row][col] = !marked[row][col];
        markSpan.style.display = marked[row][col] ? 'block' : 'none';
        checkBingo();
      });
    });

    // Bingo checking functions
    function isRowBingo(row) {
      return marked[row].every(val => val);
    }

    function isColBingo(col) {
      return marked.every(row => row[col]);
    }

    function isMainDiagonalBingo() {
      return [0, 1, 2, 3, 4].every(i => marked[i][i]);
    }

    function isAntiDiagonalBingo() {
      return [0, 1, 2, 3, 4].every(i => marked[i][4 - i]);
    }

    function checkBingo() {
      let hasBingo = false;
      for (let i = 0; i < 5; i++) {
        if (isRowBingo(i) || isColBingo(i)) {
          hasBingo = true;
          break;
        }
      }
      if (!hasBingo) {
        if (isMainDiagonalBingo() || isAntiDiagonalBingo()) {
          hasBingo = true;
        }
      }
      if (hasBingo) {
        showBingoOverlay();
      } else {
        hideBingoOverlay();
      }
    }

    // Show bingo overlay
    function showBingoOverlay() {
      const overlay = document.getElementById("bingo-overlay");
      overlay.style.display = "block";
      overlay.scrollIntoView({ behavior: "smooth" });
    }

    // Hide bingo overlay
    function hideBingoOverlay() {
      document.getElementById("bingo-overlay").style.display = "none";
    }

    // Close overlay
    document.getElementById("close-overlay").addEventListener("click", hideBingoOverlay);

    // Enable clipboard copying
    new ClipboardJS('#copy-button', {
      text: function() {
        return document.getElementById("share-message").textContent;
      }
    });
  </script>
</body>
</html>
